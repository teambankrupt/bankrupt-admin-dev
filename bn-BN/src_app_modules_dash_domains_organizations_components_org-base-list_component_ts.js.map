{"version":3,"file":"src_app_modules_dash_domains_organizations_components_org-base-list_component_ts.js","mappings":";;;;;;;;;;;;;;;;AAA0F;AAMtB;AAEqB;AAEnF,MAAgBG,uBAA6C,SAAQH,wFAAwC;EAGjHI,YAAsBC,QAAyB,EACzBC,MAAc,EACdC,YAA0C,EAC1CC,MAAmC,EAC3BC,UAA+B;IAE3D,KAAK,CAACJ,QAAQ,EAAEC,MAAM,EAAEC,YAAY,EAAEC,MAAM,CAAC;IAFjB,KAAAC,UAAU,GAAVA,UAAU;IAN9B,KAAAC,KAAK,GAAkB,IAAI;EASrC;EAEUC,WAAWA,CAACC,KAA8B;IAClD,IAAI,CAACC,OAAO,EAAE;IACd,IAAI,IAAI,CAACH,KAAK,IAAI,IAAI,EAAE;MACtBE,KAAK,CAAC,IAAI,CAACF,KAAK,CAAC;KAClB,MAAM;MACL,IAAI,CAACI,UAAU,CAACF,KAAK,CAAC;;EAE1B;EAEAE,UAAUA,CAACF,KAA8B;IACvC,IAAIG,GAAG,GAAG,IAAI,CAACC,YAAY,CAACf,kEAAQ,CAACgB,aAAa,CAACC,UAAU,EAAE,CAAC;IAChE,IAAI,CAACT,UAAU,CAACU,WAAW,CAACJ,GAAG,CAAC;IAChC,IAAI,CAACK,SAAS,CAACL,GAAG,EAAE,IAAI,EAAE,CAACM,KAAK,EAAEC,IAAI,KAAI;MACxC,IAAIC,IAAI,GAAGD,IAAI,CAACE,IAAuB;MACvC,IAAID,IAAI,CAACE,MAAM,GAAG,CAAC,EAAE;QACnBb,KAAK,CAACW,IAAI,CAAC,CAAC,CAAC,CAACG,EAAE,CAAC;;IAErB,CAAC,CAAC;EACJ;EAEQb,OAAOA,CAAA;IACb,IAAIc,MAAM,GAAGzB,uFAAmB,CAAC0B,QAAQ,CAAC,aAAa,CAAC;IACxD,IAAIC,GAAG,GAAGF,MAAM,IAAIG,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACL,MAAM,CAAC,GAAG,IAAI;IACzD,IAAIE,GAAG,IAAI,IAAI,EAAE;MACf,IAAI,CAACnB,KAAK,GAAGmB,GAAG,CAACH,EAAE;;EAEvB","sources":["./src/app/modules/dash/domains/organizations/components/org-base-list.component.ts"],"sourcesContent":["import {BaseListComponentV4} from \"../../../../../base/components/base-list-v4.component\";\nimport {EventBusService} from \"../../../../../services/eventbus/event-bus.service\";\nimport {Router} from \"@angular/router\";\nimport {SubscriptionContainerService} from \"../../../../../base/services/subscription-container.service\";\nimport {DialogService} from \"../../../../common/modules/utility/components/popup/dialog.service\";\nimport {OrganizationService} from \"../services/organization.service\";\nimport {EventKey} from \"../../../../../services/eventbus/event.key\";\nimport {IOrganization} from \"../models/organization.model\";\nimport {LocalStorageService} from \"../../../../../services/storage/localstorage.service\";\n\nexport abstract class BaseListComponentForOrg<MODEL, DETAIL_MODEL> extends BaseListComponentV4<MODEL, DETAIL_MODEL> {\n  protected orgId: number | null = null\n\n  protected constructor(eventBus: EventBusService,\n                        router: Router,\n                        subContainer: SubscriptionContainerService,\n                        dialog: DialogService<DETAIL_MODEL>,\n                        private orgService: OrganizationService\n  ) {\n    super(eventBus, router, subContainer, dialog)\n  }\n\n  protected onOrgLoaded(block: (orgId: number) => void) {\n    this.initOrg()\n    if (this.orgId != null) {\n      block(this.orgId)\n    } else {\n      this.fetchOrgId(block)\n    }\n  }\n\n  fetchOrgId(block: (orgId: number) => void) {\n    let key = this.componentKey(EventKey.ORGANIZATIONS.GET_MY_ORG())\n    this.orgService.fetchMyOrgs(key)\n    this.subscribe(key, null, (value, meta) => {\n      let orgs = meta.data as IOrganization[]\n      if (orgs.length > 0) {\n        block(orgs[0].id)\n      }\n    })\n  }\n\n  private initOrg() {\n    let orgStr = LocalStorageService.retrieve('selectedOrg')\n    let org = orgStr != undefined ? JSON.parse(orgStr) : null\n    if (org != null) {\n      this.orgId = org.id\n    }\n  }\n\n}\n"],"names":["BaseListComponentV4","EventKey","LocalStorageService","BaseListComponentForOrg","constructor","eventBus","router","subContainer","dialog","orgService","orgId","onOrgLoaded","block","initOrg","fetchOrgId","key","componentKey","ORGANIZATIONS","GET_MY_ORG","fetchMyOrgs","subscribe","value","meta","orgs","data","length","id","orgStr","retrieve","org","undefined","JSON","parse"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}